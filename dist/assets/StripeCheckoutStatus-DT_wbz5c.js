import{j as e,m as h}from"./motion-DEFBAXox.js";import{a as s}from"./vendor-C4jSHSwK.js";import{d as u,u as f}from"./index-DicW4zRf.js";import{S as p}from"./stripe-service-jIMPwR8k.js";import{L as g}from"./LoadingSpinner-CA1rpKOQ.js";import{F as j}from"./CheckCircleIcon-DwgVqYHW.js";import"./i18n-DQkvtCzx.js";import"./ui-Nk6LSbPB.js";function b({title:r,titleId:t,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},i),r?s.createElement("title",{id:t},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const v=s.forwardRef(b);function U(){const[r,t]=s.useState("loading"),[i,a]=s.useState(""),o=u.useLocation(),n=u.useNavigate(),{loadUser:c}=f();return s.useEffect(()=>{(async()=>{try{const m=new URLSearchParams(o.search).get("session_id");if(!m){t("error"),a("Aucun identifiant de session trouvé");return}const{success:x,data:N,error:d}=await p.checkSessionStatus(m);if(!x||d){t("error"),a(d||"Une erreur est survenue lors de la vérification du paiement");return}await c(),t("success"),a("Votre abonnement a été activé avec succès"),setTimeout(()=>{n("/dashboard")},3e3)}catch(l){t("error"),a(l.message||"Une erreur est survenue lors de la vérification du paiement")}})()},[o,n,c]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card max-w-md w-full text-center p-8",children:[r==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"lg",className:"mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Vérification de votre paiement"}),e.jsx("p",{className:"text-gray-400",children:"Veuillez patienter pendant que nous vérifions votre paiement..."})]}),r==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(j,{className:"h-16 w-16 text-green-500"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Paiement réussi"}),e.jsx("p",{className:"text-gray-400 mb-6",children:i}),e.jsx("p",{className:"text-sm text-gray-500",children:"Vous allez être redirigé vers votre tableau de bord..."})]}),r==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(v,{className:"h-16 w-16 text-red-500"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Erreur de paiement"}),e.jsx("p",{className:"text-gray-400 mb-6",children:i}),e.jsx("button",{onClick:()=>n("/pricing"),className:"btn-primary w-full",children:"Retour aux tarifs"})]})]})})}export{U as default};
//# sourceMappingURL=StripeCheckoutStatus-DT_wbz5c.js.map
