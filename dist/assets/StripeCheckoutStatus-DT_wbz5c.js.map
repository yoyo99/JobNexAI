{"version":3,"file":"StripeCheckoutStatus-DT_wbz5c.js","sources":["../../node_modules/@heroicons/react/24/outline/esm/XCircleIcon.js","../../src/components/StripeCheckoutStatus.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction XCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XCircleIcon);\nexport default ForwardRef;","import { useEffect, useState } from 'react'\nimport { useLocation, useNavigate } from 'react-router-dom'\nimport { motion } from 'framer-motion'\nimport { StripeService } from '../lib/stripe-service'\nimport { useAuth } from '../stores/auth'\nimport { LoadingSpinner } from './LoadingSpinner'\nimport { CheckCircleIcon, XCircleIcon } from '@heroicons/react/24/outline'\n\nfunction StripeCheckoutStatus() {\n  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading')\n  const [message, setMessage] = useState<string>('')\n  const location = useLocation()\n  const navigate = useNavigate()\n  const { loadUser } = useAuth()\n\n  useEffect(() => {\n    const checkStatus = async () => {\n      try {\n        // Get session_id from URL\n        const params = new URLSearchParams(location.search)\n        const sessionId = params.get('session_id')\n\n        if (!sessionId) {\n          setStatus('error')\n          setMessage('Aucun identifiant de session trouvé')\n          return\n        }\n\n        // Check session status\n        const { success, data, error } = await StripeService.checkSessionStatus(sessionId)\n\n        if (!success || error) {\n          setStatus('error')\n          setMessage(error || 'Une erreur est survenue lors de la vérification du paiement')\n          return\n        }\n\n        // Reload user data to get updated subscription\n        await loadUser()\n\n        // Set success status\n        setStatus('success')\n        setMessage('Votre abonnement a été activé avec succès')\n\n        // Navigate to dashboard after a delay (React Router v6 migration)\n        setTimeout(() => {\n          navigate('/dashboard')\n        }, 3000)\n      } catch (error: any) {\n        setStatus('error')\n        setMessage(error.message || 'Une erreur est survenue lors de la vérification du paiement')\n      }\n    }\n\n    checkStatus()\n  }, [location, navigate, loadUser])\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"card max-w-md w-full text-center p-8\"\n      >\n        {status === 'loading' && (\n          <>\n            <LoadingSpinner size=\"lg\" className=\"mb-4\" />\n            <h2 className=\"text-xl font-bold text-white mb-4\">\n              Vérification de votre paiement\n            </h2>\n            <p className=\"text-gray-400\">\n              Veuillez patienter pendant que nous vérifions votre paiement...\n            </p>\n          </>\n        )}\n\n        {status === 'success' && (\n          <>\n            <div className=\"flex justify-center mb-4\">\n              <CheckCircleIcon className=\"h-16 w-16 text-green-500\" />\n            </div>\n            <h2 className=\"text-xl font-bold text-white mb-4\">\n              Paiement réussi\n            </h2>\n            <p className=\"text-gray-400 mb-6\">\n              {message}\n            </p>\n            <p className=\"text-sm text-gray-500\">\n              Vous allez être redirigé vers votre tableau de bord...\n            </p>\n          </>\n        )}\n\n        {status === 'error' && (\n          <>\n            <div className=\"flex justify-center mb-4\">\n              <XCircleIcon className=\"h-16 w-16 text-red-500\" />\n            </div>\n            <h2 className=\"text-xl font-bold text-white mb-4\">\n              Erreur de paiement\n            </h2>\n            <p className=\"text-gray-400 mb-6\">\n              {message}\n            </p>\n            <button\n              onClick={() => navigate('/pricing')}\n              className=\"btn-primary w-full\"\n            >\n              Retour aux tarifs\n            </button>\n          </>\n        )}\n      </motion.div>\n    </div>\n  )\n}\n\nexport default StripeCheckoutStatus;"],"names":["XCircleIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","StripeCheckoutStatus","status","setStatus","useState","message","setMessage","location","useLocation","navigate","useNavigate","loadUser","useAuth","useEffect","sessionId","success","data","error","StripeService","jsx","jsxs","motion","Fragment","LoadingSpinner","CheckCircleIcon"],"mappings":"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","x_google_ignoreList":[0]}