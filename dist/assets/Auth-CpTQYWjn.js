import{j as r,m as I}from"./motion-DEFBAXox.js";import{a as s}from"./vendor-C4jSHSwK.js";import{d as N,A as w}from"./index-DicW4zRf.js";import{P as q}from"./PasswordStrengthMeter-xLiN_dYJ.js";import{u as M}from"./i18n-DQkvtCzx.js";import{F as R}from"./EyeIcon-CV3OtVk0.js";import"./ui-Nk6LSbPB.js";function U({title:a,titleId:h,...p},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":h},p),a?s.createElement("title",{id:h},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const z=s.forwardRef(U),G=()=>{const[a,h]=s.useState(!0),[p,c]=s.useState(!1),[u,k]=s.useState(""),[i,S]=s.useState(""),[f,L]=s.useState(""),[g,t]=s.useState(null),[E,d]=s.useState(!1),[y,C]=s.useState(!1),[b,F]=s.useState(!1),[j,v]=s.useState(null),{t:e}=M(),x=N.useNavigate(),P=N.useLocation().state?.from?.pathname||"/dashboard";s.useEffect(()=>{(async()=>{const{session:l}=await w.getSession();l&&x("/dashboard")})()},[x]);const A=async o=>{if(v(null),!b){v(e("auth.errors.acceptTerms"));return}if(o.preventDefault(),t(null),!u||!i){t({type:"error",text:e("auth.errors.requiredFields")});return}if(i.length<9){t({type:"error",text:e("auth.errors.passwordLength")});return}try{c(!0);const{user:l,error:n}=await w.signUp(u,i,f);if(n){t({type:"error",text:n.message});return}if(!l){t({type:"error",text:e("auth.errors.signup")});return}t({type:"success",text:e("auth.success.signup")}),setTimeout(()=>{x("/pricing")},2e3)}catch(l){console.error("Error signing up:",l),t({type:"error",text:l?.message||e("auth.errors.unknown")})}finally{c(!1)}},T=async o=>{if(o.preventDefault(),t(null),d(!1),!u||!i){t({type:"error",text:e("auth.errors.requiredFields")});return}if(i.length<9){t({type:"error",text:e("auth.errors.passwordLength")});return}try{c(!0);const{user:l,error:n}=await w.signIn(u,i);if(n){let m="";n.message==="Invalid login credentials"&&(m="auth.errors.login"),n.message==="User already registered"&&(m="auth.errors.signup"),n.message==="Password should be at least 9 characters"&&(m="auth.errors.passwordLength"),t({type:"error",text:m!==""?e(m):n.message||e("auth.errors.unknown")}),d(!0);return}if(!l){t({type:"error",text:e("auth.errors.login")}),d(!0);return}t({type:"success",text:e("auth.success.login")}),x(P)}catch(l){let n="";l?.message==="Invalid login credentials"&&(n="auth.errors.login"),l?.message==="User already registered"&&(n="auth.errors.signup"),l?.message==="Password should be at least 9 characters"&&(n="auth.errors.passwordLength"),t({type:"error",text:n!==""?e(n):l?.message||e("auth.errors.unknown")}),d(!0)}finally{c(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:r.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:e(a?"auth.login":"auth.signup")}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:[e("common.or")," ",r.jsx("a",{href:"/pricing",className:"font-medium text-primary-400 hover:text-primary-300",children:e("auth.startTrial")})]})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:a?T:A,children:[!a&&r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("input",{id:"accept-terms",name:"acceptTerms",type:"checkbox",checked:b,onChange:o=>F(o.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-white/10 rounded",required:!0}),r.jsxs("label",{htmlFor:"accept-terms",className:"ml-2 block text-sm text-gray-300",children:[e("auth.acceptTerms")," ",r.jsx("a",{href:"/cgu",target:"_blank",rel:"noopener noreferrer",className:"underline text-primary-400 hover:text-primary-300",children:e("auth.termsLink")})]})]}),j&&r.jsx("div",{className:"bg-red-900/50 text-red-400 p-2 rounded mb-2 text-sm",children:j}),r.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[!a&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"full-name",className:"sr-only",children:e("auth.fullName")}),r.jsx("input",{id:"full-name",name:"fullName",type:"text",autoComplete:"name",value:f,onChange:o=>{L(o.target.value),t(null)},className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white/10 placeholder-gray-400 text-white rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white/5",placeholder:e("auth.fullName")})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email-address",className:"sr-only",children:e("auth.email")}),r.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:u,onChange:o=>{k(o.target.value),t(null)},className:`appearance-none rounded-none relative block w-full px-3 py-2 border border-white/10 placeholder-gray-400 text-white ${a&&!f?"rounded-t-md":""} focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white/5`,placeholder:e("auth.email")})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:e("auth.password")}),r.jsx("input",{id:"password",name:"password",type:y?"text":"password",autoComplete:a?"current-password":"new-password",required:!0,minLength:9,value:i,onChange:o=>{S(o.target.value),t(null)},className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white/10 placeholder-gray-400 text-white rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white/5 pr-10",placeholder:e("auth.password")}),r.jsx("button",{type:"button",tabIndex:-1,"aria-label":e(y?"auth.hidePassword":"auth.showPassword"),onClick:()=>C(o=>!o),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-primary-400 focus:outline-none",style:{background:"none",border:"none"},children:y?r.jsx(z,{className:"h-5 w-5","aria-hidden":"true"}):r.jsx(R,{className:"h-5 w-5","aria-hidden":"true"})})]})]}),!a&&r.jsx(q,{password:i}),g&&r.jsx("div",{className:`rounded-md p-4 ${g.type==="error"?"bg-red-900/50 text-red-400":"bg-green-900/50 text-green-400"}`,role:"alert",children:r.jsx("p",{className:"text-sm",children:g.text})}),E&&a&&r.jsxs("div",{className:"bg-blue-900/50 text-blue-400 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:e("auth.help.title")}),r.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside",children:[r.jsx("li",{children:e("auth.help.checkEmail")}),r.jsx("li",{children:e("auth.help.capsLock")}),r.jsx("li",{children:e("auth.help.forgotPassword")}),r.jsx("li",{children:e("auth.help.noAccount")})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white btn-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(p?"common.loading":a?"auth.login":"auth.createAccount")}),r.jsx("button",{type:"button",onClick:()=>{h(!a),t(null),d(!1)},className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white btn-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:e(a?"auth.createAccount":"auth.alreadyRegistered")})]})]})]})})};export{G as default};
//# sourceMappingURL=Auth-CpTQYWjn.js.map
