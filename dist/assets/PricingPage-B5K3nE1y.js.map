{"version":3,"file":"PricingPage-B5K3nE1y.js","sources":["../../src/components/SubscriptionPlanCard.tsx","../../src/pages/PricingPage.tsx"],"sourcesContent":["import React from 'react';\nimport { supabase } from '../lib/supabaseClient'; // Mise à jour du chemin\nimport { useAuth } from '../stores/auth'; // Importer useAuth\n\ninterface SubscriptionPlanCardProps {\n  planName: string;\n  price: string;\n  features: string[];\n  priceId: string;\n  isEnterprise?: boolean; // Pour un style potentiellement différent\n}\n\nconst SubscriptionPlanCard: React.FC<SubscriptionPlanCardProps> = ({ planName, price, features, priceId, isEnterprise }) => {\n  const { user } = useAuth(); // Obtenir l'utilisateur depuis le store/hook\n\n  const handleSubscription = async (priceId: string) => {\n    // Vérifier si l'utilisateur existe (obtenu depuis useAuth)\n    if (!user) {\n      console.error('User not authenticated (checked via useAuth)');\n      alert('Veuillez vous connecter pour vous abonner.');\n      return;\n    }\n\n    // Plus besoin de getSession(), on utilise l'utilisateur du hook\n    console.log(`User ${user.id} attempting to subscribe to price ID: ${priceId}`);\n\n    try {\n      const { data, error } = await supabase.functions.invoke('create-stripe-checkout', {\n        body: { priceId: priceId }, // Passer l'ID utilisateur si nécessaire par la fonction\n      });\n\n      if (error) {\n        console.error('Error invoking Stripe checkout function:', error);\n        alert(`Erreur lors de la création de la session de paiement: ${error.message}`);\n        return;\n      }\n\n      if (data && data.checkoutUrl) {\n        console.log('Received checkout URL:', data.checkoutUrl);\n        window.location.href = data.checkoutUrl;\n      } else {\n        console.error('No checkoutUrl received from function:', data);\n        alert('Erreur : URL de paiement non reçue.');\n      }\n    } catch (e) {\n      console.error('Unexpected error during subscription process:', e);\n      alert(`Une erreur inattendue est survenue: ${(e as Error).message}`);\n    }\n  };\n\n  const cardStyle = `\n    border rounded-lg p-6 shadow-lg \n    ${isEnterprise ? 'bg-blue-50 border-blue-500' : 'bg-white border-gray-200'}\n    flex flex-col justify-between h-full\n  `;\n  const buttonStyle = `\n    mt-6 w-full py-2 px-4 rounded font-semibold \n    ${isEnterprise ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}\n    transition duration-150 ease-in-out\n  `;\n\n  return (\n    <div className={cardStyle.replace(/\\n\\s*/g, ' ')}>\n      <div>\n        <h3 className={`text-2xl font-semibold ${isEnterprise ? 'text-blue-700' : 'text-gray-800'}`}>{planName}</h3>\n        <p className={`text-4xl font-bold my-4 ${isEnterprise ? 'text-blue-600' : 'text-green-600'}`}>{price}</p>\n        <ul className=\"list-disc list-inside space-y-2 text-gray-700\">\n          {features.map((feature, index) => (\n            <li key={index}>{feature}</li>\n          ))}\n        </ul>\n      </div>\n      <button \n        onClick={() => handleSubscription(priceId)} \n        className={buttonStyle.replace(/\\n\\s*/g, ' ')}\n      >\n        Choisir ce plan\n      </button>\n    </div>\n  );\n};\n\nexport default SubscriptionPlanCard;\n","import React from 'react';\nimport SubscriptionPlanCard from '../components/SubscriptionPlanCard'; // Vérifiez le chemin\n\n// Remplacez par vos vrais Price IDs Stripe\nconst PRICE_IDS = {\n  PRO_MONTHLY: 'price_1RMqzHQIOmiow8714WydjFom', // Exemple: price_1RCkHsS6wNQV7f...\n  PRO_ANNUAL: 'price_1RCiWyQIOmiow871qikbv26N',   // Exemple: price_1RCiWS6wPihZqV...\n  ENT_MONTHLY: 'price_1RCibGQIOmiow871TscCjF6g', // Exemple: price_1RCibIS6wUR0fn...\n  ENT_ANNUAL: 'price_1RCictQIOmiow871v0V7O7if',   // Exemple: price_1RCic1S6wVXchP...\n};\n\nconst PricingPage: React.FC = () => {\n  return (\n    <div className=\"container mx-auto px-4 py-12\">\n      <h1 className=\"text-4xl font-bold text-center mb-12 text-gray-800\">Nos Plans d'Abonnement</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n        \n        <SubscriptionPlanCard \n          planName=\"Pro Mensuel\"\n          price=\"9.99€/mois\"\n          features={['Accès aux fonctionnalités Pro', 'Support par email', 'Mises à jour mensuelles']}\n          priceId={PRICE_IDS.PRO_MONTHLY}\n        />\n\n        <SubscriptionPlanCard \n          planName=\"Pro Annuel\"\n          price=\"95.04€/an\"\n          features={['Accès aux fonctionnalités Pro', 'Support prioritaire', 'Économie de 2 mois', 'Mises à jour continues']}\n          priceId={PRICE_IDS.PRO_ANNUAL}\n        />\n\n        <SubscriptionPlanCard \n          planName=\"Entreprise Mensuel\"\n          price=\"29.99€/mois\"\n          features={['Toutes les fonctionnalités Pro', 'Support dédié 24/7', 'Accès API', 'Analyses avancées']}\n          priceId={PRICE_IDS.ENT_MONTHLY}\n          isEnterprise={true}\n        />\n\n        <SubscriptionPlanCard \n          planName=\"Entreprise Annuel\"\n          price=\"287.90€/an\"\n          features={['Toutes les fonctionnalités Entreprise', 'Économie significative', 'Accompagnement personnalisé']}\n          priceId={PRICE_IDS.ENT_ANNUAL}\n          isEnterprise={true}\n        />\n\n      </div>\n      <p className=\"text-center text-gray-600 mt-12\">\n        Tous les prix sont en EUR. Choisissez le plan qui vous convient le mieux et commencez dès aujourd'hui !\n      </p>\n    </div>\n  );\n};\n\nexport default PricingPage;\n"],"names":["SubscriptionPlanCard","planName","price","features","priceId","isEnterprise","user","useAuth","handleSubscription","data","error","supabase","e","cardStyle","buttonStyle","jsxs","jsx","feature","index","PRICE_IDS","PricingPage"],"mappings":"mNAYA,MAAMA,EAA4D,CAAC,CAAE,SAAAC,EAAU,MAAAC,EAAO,SAAAC,EAAU,QAAAC,EAAS,aAAAC,KAAmB,CACpH,KAAA,CAAE,KAAAC,CAAK,EAAIC,EAAQ,EAEnBC,EAAqB,MAAOJ,GAAoB,CAEpD,GAAI,CAACE,EAAM,CACT,QAAQ,MAAM,8CAA8C,EAC5D,MAAM,4CAA4C,EAClD,MAAA,CAIF,QAAQ,IAAI,QAAQA,EAAK,EAAE,yCAAyCF,CAAO,EAAE,EAEzE,GAAA,CACI,KAAA,CAAE,KAAAK,EAAM,MAAAC,CAAM,EAAI,MAAMC,EAAS,UAAU,OAAO,yBAA0B,CAChF,KAAM,CAAE,QAASP,CAAQ,CAAA,CAC1B,EAED,GAAIM,EAAO,CACD,QAAA,MAAM,2CAA4CA,CAAK,EACzD,MAAA,yDAAyDA,EAAM,OAAO,EAAE,EAC9E,MAAA,CAGED,GAAQA,EAAK,aACP,QAAA,IAAI,yBAA0BA,EAAK,WAAW,EAC/C,OAAA,SAAS,KAAOA,EAAK,cAEpB,QAAA,MAAM,yCAA0CA,CAAI,EAC5D,MAAM,qCAAqC,SAEtCG,EAAG,CACF,QAAA,MAAM,gDAAiDA,CAAC,EAC1D,MAAA,uCAAwCA,EAAY,OAAO,EAAE,CAAA,CAEvE,EAEMC,EAAY;AAAA;AAAA,MAEdR,EAAe,6BAA+B,0BAA0B;AAAA;AAAA,IAGtES,EAAc;AAAA;AAAA,MAEhBT,EAAe,2CAA6C,4CAA4C;AAAA;AAAA,IAI5G,cACG,MAAI,CAAA,UAAWQ,EAAU,QAAQ,SAAU,GAAG,EAC7C,SAAA,CAAAE,OAAC,MACC,CAAA,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAW,0BAA0BX,EAAe,gBAAkB,eAAe,GAAK,SAASJ,CAAA,CAAA,EACvGe,EAAAA,IAAC,KAAE,UAAW,2BAA2BX,EAAe,gBAAkB,gBAAgB,GAAK,SAAMH,CAAA,CAAA,EACpGc,EAAA,IAAA,KAAA,CAAG,UAAU,gDACX,WAAS,IAAI,CAACC,EAASC,IACrBF,EAAA,IAAA,KAAA,CAAgB,SAARC,CAAA,EAAAC,CAAgB,CAC1B,CACH,CAAA,CAAA,EACF,EACAF,EAAA,IAAC,SAAA,CACC,QAAS,IAAMR,EAAmBJ,CAAO,EACzC,UAAWU,EAAY,QAAQ,SAAU,GAAG,EAC7C,SAAA,iBAAA,CAAA,CAED,EACF,CAEJ,EC5EMK,EAAY,CAChB,YAAa,iCACb,WAAY,iCACZ,YAAa,iCACb,WAAY,gCACd,EAEMC,EAAwB,IAE1BL,EAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,qDAAqD,SAAsB,yBAAA,EACzFD,EAAAA,KAAC,MAAI,CAAA,UAAU,uDAEb,SAAA,CAAAC,EAAA,IAAChB,EAAA,CACC,SAAS,cACT,MAAM,aACN,SAAU,CAAC,gCAAiC,oBAAqB,yBAAyB,EAC1F,QAASmB,EAAU,WAAA,CACrB,EAEAH,EAAA,IAAChB,EAAA,CACC,SAAS,aACT,MAAM,YACN,SAAU,CAAC,gCAAiC,sBAAuB,qBAAsB,wBAAwB,EACjH,QAASmB,EAAU,UAAA,CACrB,EAEAH,EAAA,IAAChB,EAAA,CACC,SAAS,qBACT,MAAM,cACN,SAAU,CAAC,iCAAkC,qBAAsB,YAAa,mBAAmB,EACnG,QAASmB,EAAU,YACnB,aAAc,EAAA,CAChB,EAEAH,EAAA,IAAChB,EAAA,CACC,SAAS,oBACT,MAAM,aACN,SAAU,CAAC,wCAAyC,yBAA0B,6BAA6B,EAC3G,QAASmB,EAAU,WACnB,aAAc,EAAA,CAAA,CAChB,EAEF,EACCH,EAAA,IAAA,IAAA,CAAE,UAAU,kCAAkC,SAE/C,yGAAA,CAAA,CAAA,EACF"}