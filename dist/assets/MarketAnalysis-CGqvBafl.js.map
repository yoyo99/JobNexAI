{"version":3,"file":"MarketAnalysis-CGqvBafl.js","sources":["../../src/components/MarketAnalysis.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { motion } from 'framer-motion'\nimport { useTranslation } from 'react-i18next'\nimport { getMarketTrends, type MarketTrend } from '../lib/supabase'\nimport { ChartBarIcon, MapPinIcon, CurrencyEuroIcon } from '@heroicons/react/24/outline'\n\ntype MarketTrendsData = {\n  jobTypes: MarketTrend[]\n  locations: MarketTrend[]\n  salary: {\n    average: number\n    count: number\n  }\n}\n\nfunction MarketAnalysis() {\n  const { t } = useTranslation()\n  const [loading, setLoading] = useState(true)\n  const [trends, setTrends] = useState<MarketTrendsData | null>(null)\n\n  useEffect(() => {\n    loadTrends()\n  }, [])\n\n  const loadTrends = async () => {\n    try {\n      setLoading(true)\n      const data = await getMarketTrends()\n      setTrends(data)\n    } catch (error) {\n      console.error('Error loading market trends:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-400\"></div>\n      </div>\n    )\n  }\n\n  if (!trends) return null\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-white\">{t('marketAnalysis.title')}</h1>\n        <p className=\"text-gray-400 mt-1\">{t('marketAnalysis.subtitle')}</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n          className=\"card\"\n        >\n          <div className=\"flex items-center gap-4 mb-4\">\n            <div className=\"p-3 rounded-lg bg-white/5\">\n              <ChartBarIcon className=\"h-6 w-6 text-primary-400\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-white\">{t('marketAnalysis.jobTypes')}</h2>\n          </div>\n          <div className=\"space-y-4\">\n            {(Array.isArray(trends.jobTypes) ? trends.jobTypes : []).map((trend) => (\n              <div key={trend.category}>\n                <div className=\"flex justify-between text-sm mb-1\">\n                  <span className=\"text-gray-400\">{trend.category}</span>\n                  <span className=\"text-white\">{trend.percentage.toFixed(1)}%</span>\n                </div>\n                <div className=\"h-2 bg-white/5 rounded-full overflow-hidden\">\n                  <div\n                    className=\"h-full bg-gradient-to-r from-primary-600 to-secondary-600\"\n                    style={{ width: `${trend.percentage}%` }}\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, delay: 0.1 }}\n          className=\"card\"\n        >\n          <div className=\"flex items-center gap-4 mb-4\">\n            <div className=\"p-3 rounded-lg bg-white/5\">\n              <MapPinIcon className=\"h-6 w-6 text-primary-400\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-white\">{t('marketAnalysis.topLocations')}</h2>\n          </div>\n          <div className=\"space-y-4\">\n            {(Array.isArray(trends.locations) ? trends.locations : []).map((trend) => (\n              <div key={trend.category}>\n                <div className=\"flex justify-between text-sm mb-1\">\n                  <span className=\"text-gray-400\">{trend.category}</span>\n                  <span className=\"text-white\">{trend.percentage.toFixed(1)}%</span>\n                </div>\n                <div className=\"h-2 bg-white/5 rounded-full overflow-hidden\">\n                  <div\n                    className=\"h-full bg-gradient-to-r from-primary-600 to-secondary-600\"\n                    style={{ width: `${trend.percentage}%` }}\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, delay: 0.2 }}\n          className=\"card\"\n        >\n          <div className=\"flex items-center gap-4 mb-4\">\n            <div className=\"p-3 rounded-lg bg-white/5\">\n              <CurrencyEuroIcon className=\"h-6 w-6 text-primary-400\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-white\">{t('marketAnalysis.salaryInsights')}</h2>\n          </div>\n          {typeof trends.salary.count === \"number\" && trends.salary.count > 0 ? (\n            <div>\n              <div className=\"text-3xl font-bold text-white mb-2\">\n                {trends.salary.average.toLocaleString('fr-FR', {\n                  style: 'currency',\n                  currency: 'EUR',\n                  maximumFractionDigits: 0\n                })}\n              </div>\n              <p className=\"text-sm text-gray-400\">\n                {t('marketAnalysis.averageSalary', { count: trends.salary.count })}\n              </p>\n            </div>\n          ) : (\n            <p className=\"text-gray-400\">{t('marketAnalysis.noSalaryData')}</p>\n          )}\n        </motion.div>\n      </div>\n    </div>\n  )\n}\n\nexport default MarketAnalysis;"],"names":["MarketAnalysis","useTranslation","loading","setLoading","useState","trends","setTrends","useEffect","loadTrends","data","getMarketTrends","error","jsx","jsxs","motion","ChartBarIcon","trend","MapPinIcon","CurrencyEuroIcon"],"mappings":"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"}