import{j as e,m as f}from"./motion-DEFBAXox.js";import{a}from"./vendor-C4jSHSwK.js";import{d as y}from"./index-DicW4zRf.js";import{P as h}from"./PasswordStrengthMeter-xLiN_dYJ.js";import{s as g}from"./supabaseClient-BHztVw80.js";import{u as w}from"./i18n-DQkvtCzx.js";import"./ui-Nk6LSbPB.js";function R(){const[l,d]=a.useState(!1),[t,c]=a.useState(""),[n,m]=a.useState(""),[i,s]=a.useState(null),{t:p}=w(),u=y.useNavigate(),x=async o=>{if(o.preventDefault(),s(null),!t||!n){s({type:"error",text:"Veuillez remplir tous les champs"});return}if(t!==n){s({type:"error",text:"Les mots de passe ne correspondent pas"});return}try{d(!0),console.log("Tentative de reset du mot de passe via Supabase...");const{error:r}=await g.auth.updateUser({password:t});if(console.log("Réponse Supabase reçue",r),r){s({type:"error",text:r.message});return}s({type:"success",text:"Votre mot de passe a été mis à jour avec succès"}),setTimeout(()=>{u("/login")},2e3)}catch(r){console.error("Erreur inattendue reset password:",r),s({type:"error",text:r.message||"Une erreur est survenue"})}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Réinitialiser votre mot de passe"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Veuillez choisir un nouveau mot de passe sécurisé"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Nouveau mot de passe"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:t,onChange:o=>{c(o.target.value),s(null)},className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white/10 placeholder-gray-400 text-white rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white/5",placeholder:"Nouveau mot de passe"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirmer le mot de passe"}),e.jsx("input",{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:o=>{m(o.target.value),s(null)},className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white/10 placeholder-gray-400 text-white rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white/5",placeholder:"Confirmer le mot de passe"})]})]}),e.jsx(h,{password:t}),i&&e.jsx("div",{className:`rounded-md p-4 ${i.type==="error"?"bg-red-900/50 text-red-400":"bg-green-900/50 text-green-400"}`,role:"alert",children:e.jsx("p",{className:"text-sm",children:i.text})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white btn-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?p("common.loading"):"Réinitialiser le mot de passe"}),e.jsx("button",{type:"button",onClick:()=>u("/login"),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white btn-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Retour à la connexion"})]})]})]})})}export{R as default};
//# sourceMappingURL=ResetPassword-eofDhtp_.js.map
